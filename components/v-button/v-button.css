:host {
  display: block;
  width: max-content;
}

button {
  display: flex;
  /* gap: var(--v-button-gap, var(--unit-2)); */
  align-items: center;
  width: 100%;
  box-sizing: border-box;
  border: 1px solid transparent;
  outline: none;
  cursor: pointer;
  font-family: inherit;
  font-size: 1rem;
  font-weight: 500;
  overflow: hidden;
  position: relative;

  padding: var(--v-button-padding-y, var(--unit-2)) var(--v-button-padding-x, var(--unit-4));
  border-radius: var(--v-button-border-radius, var(--unit-1));

  background: color-mix(in oklab, var(--v-color-surface) calc(var(--v-button-bg-opacity, 1) * 100%), transparent);
  color: var(--v-color-text);

  transition:
    background 0.2s ease,
    box-shadow 0.2s ease,
    border-color 0.2s ease,
    color 0.2s ease;

  &:disabled {
    opacity: 0.4;
    cursor: not-allowed;
    pointer-events: none;
  }
}

.v-button-ripple {
  position: absolute;
  border-radius: 50%;
  transform: scale(0);
  pointer-events: none;
  background: color-mix(in oklab, currentColor 7%, transparent);
  animation: v-button-ripple 0.6s ease-out;
}

:host(.v-primary) .v-button-ripple,
:host(.v-danger) .v-button-ripple,
:host(.v-accent) .v-button-ripple {
  background: color-mix(in oklab, currentColor 15%, transparent);
}

@keyframes v-button-ripple {
  to {
    transform: scale(1);
    opacity: 0;
  }
}

button > :not(.prefix):not(.postfix) {
  flex: 1;
}

.btn-text {
  height: 28px;
  font-size: 18px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  white-space: nowrap;
  margin-inline: var(--unit-2);
}

:host([text-align='left']) .btn-text {
  justify-content: flex-start;
}

:host([text-align='right']) .btn-text {
  justify-content: flex-end;
}

.prefix,
.postfix {
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

/* :host:not([style*='width']) {
  width: fit-content;
} */

/* :host:not([style*='width']) button {
  width: auto;
} */

/* Link variant */
:host(.v-link) button {
  background: transparent;
  border-color: transparent;
  box-shadow: none;
  color: var(--v-color-text);

  &:hover {
    color: var(--v-color-accent);
  }

  &:active {
    color: color-mix(in oklab, var(--v-color-accent) 82%, black 18%);
  }
}

:host(.v-link.v-primary) button:active {
  color: color-mix(in oklab, var(--v-color-accent) 82%, black 18%);
}

:host(.v-link.v-danger) button:active {
  color: color-mix(in oklab, var(--v-color-danger) 82%, black 18%);
}

:host(.v-link.v-accent) button:active {
  color: color-mix(in oklab, var(--v-color-accent-alt) 82%, black 18%);
}

/* Flat variant */
:host(.v-flat) button {
  background: var(--v-color-surface);
  border-color: var(--v-color-border-subtle);
  box-shadow: none;

  &:hover {
    border-color: color-mix(in oklab, var(--v-color-text) 35%, transparent);
  }
}

:host(.v-flat.v-primary) button,
:host(.v-flat.v-danger) button,
:host(.v-flat.v-accent) button {
  border-color: transparent;
}

:host(.v-flat.v-primary) button:hover,
:host(.v-flat.v-danger) button:hover,
:host(.v-flat.v-accent) button:hover {
  border-color: transparent;
}

/* Raised variant */
:host(.v-raised) button {
  background: var(--v-color-surface);
  box-shadow: var(--v-shadow-outer-1);

  &:hover {
    box-shadow: var(--v-shadow-outer-2);
  }

  &:active {
    box-shadow: var(--v-shadow-outer-1);
  }
}

:host(.v-raised.v-primary) button,
:host(.v-raised.v-danger) button,
:host(.v-raised.v-accent) button {
  box-shadow: 0 2px 4px rgba(15, 23, 42, 0.16);
}

:host(.v-raised.v-primary) button:hover,
:host(.v-raised.v-danger) button:hover,
:host(.v-raised.v-accent) button:hover {
  box-shadow: 0 6px 12px rgba(15, 23, 42, 0.22);
}

:host(.v-raised.v-primary) button:active,
:host(.v-raised.v-danger) button:active,
:host(.v-raised.v-accent) button:active {
  box-shadow: 0 2px 4px rgba(15, 23, 42, 0.16);
}

:host(.v-primary) button {
  color: var(--v-color-text-on-accent, white);
  background: color-mix(in oklab, var(--v-color-accent) calc(var(--v-button-bg-opacity, 1) * 100%), transparent);
  border-color: transparent;
}

:host(.v-danger) button {
  color: var(--v-color-text-on-accent, white);
  background: color-mix(in oklab, var(--v-color-danger) calc(var(--v-button-bg-opacity, 1) * 100%), transparent);
  border-color: transparent;
}

:host(.v-accent) button {
  color: var(--v-color-text-on-accent, white);
  background: color-mix(in oklab, var(--v-color-accent-alt) calc(var(--v-button-bg-opacity, 1) * 100%), transparent);
  border-color: transparent;
}

:host(.v-primary) button:hover {
  background: color-mix(in oklab, var(--v-color-accent) 88%, black 12%);
}

:host(.v-primary) button:active {
  background: color-mix(in oklab, var(--v-color-accent) 82%, black 18%);
}

:host(.v-danger) button:hover {
  background: color-mix(in oklab, var(--v-color-danger) 88%, black 12%);
}

:host(.v-danger) button:active {
  background: color-mix(in oklab, var(--v-color-danger) 82%, black 18%);
}

:host(.v-accent) button:hover {
  background: color-mix(in oklab, var(--v-color-accent-alt) 88%, black 12%);
}

:host(.v-accent) button:active {
  background: color-mix(in oklab, var(--v-color-accent-alt) 82%, black 18%);
}

:host(.v-link.v-primary) button,
:host(.v-link.v-danger) button,
:host(.v-link.v-accent) button {
  background: transparent;
  box-shadow: none;
}

:host(.v-link.v-primary) button {
  color: var(--v-color-accent);
}

:host(.v-link.v-danger) button {
  color: var(--v-color-danger);
}

:host(.v-link.v-accent) button {
  color: var(--v-color-accent-alt);
}

:host(.v-link.v-primary) button:hover {
  color: color-mix(in oklab, var(--v-color-accent) 80%, black 20%);
}

:host(.v-link.v-danger) button:hover {
  color: color-mix(in oklab, var(--v-color-danger) 80%, black 20%);
}

:host(.v-link.v-accent) button:hover {
  color: color-mix(in oklab, var(--v-color-accent-alt) 80%, black 20%);
}

:host-context(.dark).v-link.v-primary button:hover {
  color: color-mix(in oklab, var(--v-color-accent) 80%, white 20%);
}

:host-context(.dark).v-link.v-danger button:hover {
  color: color-mix(in oklab, var(--v-color-danger) 80%, white 20%);
}

:host-context(.dark).v-link.v-accent button:hover {
  color: color-mix(in oklab, var(--v-color-accent-alt) 80%, white 20%);
}

:host(.v-hover.v-primary):not(.v-link) button,
:host(.v-hover.v-danger):not(.v-link) button,
:host(.v-hover.v-accent):not(.v-link) button {
  color: var(--v-color-text);
  background: var(--v-color-surface);
  border-color: var(--v-color-border-subtle);
}

:host(.v-hover.v-primary):not(.v-link) button:hover {
  color: var(--v-color-text-on-accent, white);
  background: var(--v-color-accent);
  border-color: var(--v-color-accent);
}

:host(.v-hover.v-primary):not(.v-link) button:active {
  background: color-mix(in oklab, var(--v-color-accent) 90%, black 10%);
}

:host(.v-hover.v-danger):not(.v-link) button:hover {
  color: var(--v-color-text-on-accent, white);
  background: var(--v-color-danger);
  border-color: var(--v-color-danger);
}

:host(.v-hover.v-danger):not(.v-link) button:active {
  background: color-mix(in oklab, var(--v-color-danger) 90%, black 10%);
}

:host(.v-hover.v-accent):not(.v-link) button:hover {
  color: var(--v-color-text-on-accent, white);
  background: var(--v-color-accent-alt);
  border-color: var(--v-color-accent-alt);
}

:host(.v-hover.v-accent):not(.v-link) button:active {
  background: color-mix(in oklab, var(--v-color-accent-alt) 90%, black 10%);
}

:host(.v-no-shadow) button {
  box-shadow: none !important;

  &:hover {
    box-shadow: none !important;
  }

  &:active {
    box-shadow: none !important;
  }
}
